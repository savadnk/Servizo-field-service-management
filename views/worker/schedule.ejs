<link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>

<!-- ✅ Bootstrap for modal -->
<!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script> -->

<style>
  body{
    background: var(--bg);
  }
  .jobs-title{
    color: var(--txt);
  }
  #calendar {
    max-width: 90%;
    margin: 20px auto;
    background: var(--panel);
    padding: 15px;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  }

  .fc-daygrid-day-number {
    color: var(--txt) !important;
    font-weight: 600;
    text-decoration: none;
  }

  .fc-col-header-cell-cushion {
    color: var(--txt) !important;
    font-weight: 600;
    text-decoration: none;
  }

  .fc-event-title {
    color: var(--txt) !important;
    font-weight: 600;
  }

  .fc-daygrid-event-dot {
    border-color: var(--grey) !important;
    background-color: var(--grey) !important;
  }

  .fc .fc-button {
    background: var(--panel) !important;
    border: 1px solid var(--line) !important;
    color: var(--txt) !important;
    font-weight: 500;
  }

  .fc .fc-button-active {
    background: var(--green) !important;
    color: var(--txt) !important;
    border: 1px solid var(--green) !important;
  }

  .fc .fc-today-button {
    background: var(--green) !important;
    border: 1px solid var(--green) !important;
    color: var(--txt) !important;
    font-weight: bold;
  }

  /* Hide event time */
  .fc-event-time {
    display: none !important;
  }
</style>

<div class="container my-4">
  <h2 class="jobs-title mb-4">My Job Schedule</h2>
  <div id="calendar"></div>
</div>

<!-- ✅ Modal Structure -->
<div class="modal fade" id="eventModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content" style="background: var(--panel); color: var(--txt); border: 1px solid var(--line);">
      <div class="modal-header">
        <h5 class="modal-title">Job Details</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p  class="text-light"><strong>Job:</strong> <span style="color: var(--grey);" id="modalJobTitle"></span></p>
        <p  class="text-light"> <strong>Status:</strong> <span  style="color: var(--grey);" id="modalJobStatus"></span></p>
        <p  class="text-light"><strong>Description:</strong> <span  style="color: var(--grey);" id="modalJobDesc"></span></p>
      </div>
     
    </div>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const calendarEl = document.getElementById("calendar");
    const events = <%- events %>; // Parsed from controller

    const calendar = new FullCalendar.Calendar(calendarEl, {
      initialView: "dayGridMonth", // only month
      headerToolbar: {
        left: "prev,next today",
        center: "title",
        right: "" // remove week view
      },
      events: events,
      eventClick: function (info) {
        // ✅ Fill modal with event details
        document.getElementById("modalJobTitle").textContent = info.event.title;
        document.getElementById("modalJobStatus").textContent = info.event.extendedProps.status;
        document.getElementById("modalJobDesc").textContent = info.event.extendedProps.description;

        // ✅ Show modal
        const modal = new bootstrap.Modal(document.getElementById("eventModal"));
        modal.show();
      }
    });

    calendar.render();
  });


</script>

<!-- 
 <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
  <style>
    #calendar {
      max-width: 90%;
      margin: 20px auto;
      background: var(--panel);
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    /* ✅ Change date numbers color */
  .fc-daygrid-day-number {
    color: var(--txt) !important;
    font-weight: 600; /* optional for bold */
        text-decoration: none;

  }

  /* ✅ Change header days (Sun, Mon, etc.) color */
  .fc-col-header-cell-cushion {
    color: var(--txt) !important;
    font-weight: 600;
    text-decoration: none;
  }

   /* ✅ Event text color green */
  .fc-event-title,
  .fc-event-time {
    color: var(--green) !important;
    font-weight: 600;
  }

 /* ✅ Change the small event dot to green */
.fc-daygrid-event-dot {
  border-color: var(--grey) !important;
  background-color: var(--grey) !important;
}


  /* ✅ Toolbar buttons default style */
  .fc .fc-button {
    background: var(--panel) !important;
    border: 1px solid var(--line) !important;
    color: var(--txt) !important;
    font-weight: 500;
  }

  /* ✅ Active button (month/week when selected) */
  .fc .fc-button-active {
    background: var(--green) !important;
    color:  var(--txt) !important;
    border: 1px solid var(--green) !important;
  }

  /* ✅ Today button custom */
  .fc .fc-today-button {
    background: var(--green) !important;
    border: 1px solid var(--green) !important;
    color:  var(--txt) !important;
    font-weight: bold;
  }

  /* ✅ Week view event box green background */
  .fc-timegrid-event {
    background-color: rgba(0, 0, 0, 0.263) !important;
    border: 1px solid var(--chip-borde) !important;
    color:  var(--txt) !important;
    font-weight: 600;
  }
  </style>

<div class="container mt-4">
  <h2 class="jobs-title mb-4">My Job Schedule</h2>

  <div id="calendar"></div>
</div>



<script>
    document.addEventListener("DOMContentLoaded", function () {
        const calendarEl = document.getElementById("calendar");
        const events = <%- events %>; // Parsed from controller

        const calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: "dayGridMonth", // monthly
            headerToolbar: {
                left: "prev,next today",
                center: "title",
                right: "dayGridMonth,timeGridWeek" // month/week/list
            },
            events: events,
            eventClick: function (info) {
                alert(
                    "Job: " + info.event.title +
                    "\nStatus: " + info.event.extendedProps.status +
                    "\nDescription: " + info.event.extendedProps.description
                );
            }
        });

        calendar.render();
    });
</script>
 -->
